<!DOCTYPE html>
<html>
<head>
<link rel="icon" href="https://icons.better-idea.org/icon?size=80..120..200&url=github.com"><title>GitHub site [Andres Picazo]</title><link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/slate/bootstrap.min.css"/>
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/zenburn.min.css"/><script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>
<style>
    body { padding-top: 70px; padding-left: 20px; padding-right: 20px; }
    .content-selector { text-align: center; padding-top: 20px; }
    .marksite code { padding: 4px 4px; }
    .marksite pre { padding: 0px; }
    .marksite hr { border-top: 1px solid #ffffff; }
    .footer { background-color: #697075; min-height: 50px; line-height: 50px; text-align: center; margin-top:25px }
    th, td { padding: 5px; border:1px solid black; }
</style>
<script>
    hljs.initHighlightingOnLoad();
    angular.module("marksite",[]).controller("marksite-controller", ["$rootScope","$scope", function ($root, $scope) {
        $root.bookmark = { chapter: 0, page: 0 };
    }]);
</script>
</head>
<body ng-app="marksite" class="marksite">
    <div ng-controller="marksite-controller">
        <nav class="navbar navbar-default navbar-fixed-top navbar-inverse">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#marksite-navbar" aria-expanded="false">
                        <span class="sr-only">Toggle nav</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="https://github.com/apycazo?tab=repositories">Andrew's GitHub</a>
                </div>
                <div class="collapse navbar-collapse" id="marksite-navbar"><ul class="nav navbar-nav"><li><a href="#" ng-click="$root.bookmark.chapter=0;$root.bookmark.page=0">Home</a></li>
<li><a href="#" ng-click="$root.bookmark.chapter=1;$root.bookmark.page=0">Marksite</a></li>
<li><a href="#" ng-click="$root.bookmark.chapter=2;$root.bookmark.page=0">Java | Spring</a></li>
<li><a href="#" ng-click="$root.bookmark.chapter=3;$root.bookmark.page=0">Maven</a></li>
<li><a href="#" ng-click="$root.bookmark.chapter=4;$root.bookmark.page=0">Applications</a></li></ul></div>
            </div>
        </nav>
        <div class="row">
<div class="content-viewport col-md-9 col-md-offset-1" ng-show="$root.bookmark.chapter==0 && $root.bookmark.page==0"><h1 id="andres-picazo-github-page">Andres Picazo GitHub page</h1>
<p>This is the landing page for my github repositories. A small entry for each project is included here. For more detailed info about
each one please select the appropriate menu option.</p>
<p>Remember that this page is intended to be a reference for myself, since most projects already published here are meant to be reminders
and references about implementations, software usage and random tips I have found useful in the past.</p>
<h1 id="the-projects">The projects</h1>
<hr>
<h3 id="codex">Codex</h3>
<p>Right now this is my most up to date reference project. I hope to keep here all the miscellaneus reference projects I actually use.
Currently this included java-spring, angularjs and nodejs projects. I have removed most of the projects I had on github, and will include
them here when I have refactored and updated them.</p>
<p>More specific links to:</p>
<ul>
<li><a href="https://github.com/apycazo/codex">Main repository</a>.</li>
<li><a href="https://github.com/apycazo/codex/tree/master/codex-spring/codex-spring-base">Spring boot miscellaneus</a></li>
<li><a href="https://github.com/apycazo/codex/tree/master/codex-spring/codex-spring-rest">Spring boot rest/MVC services</a></li>
<li><a href="https://github.com/apycazo/codex/tree/master/codex-spring/codex-spring-security">Spring security</a></li>
<li><a href="https://github.com/apycazo/codex/tree/master/codex-nodejs">NodeJS</a></li>
<li><a href="https://github.com/apycazo/codex/tree/master/codex-angularjs">AngularJS</a></li>
</ul>
<h3 id="legacy">Legacy</h3>
<p>Most old code is now here, at least the code I did not want to get rid off right now. Whatever is useful will be refactored into <code>codex</code>
entries.</p>
<h3 id="marksite">Marksite</h3>
<p>This is a very small project I did to quickly set up this page. I could have used jekyll or something, but since I did not have anything
really useful done with nodejs, and I wanted a few specific features on the page generation, I decided to go with a quick implementation of
a markdown to html site generator.</p>
<p>Right now it does just what I wanted it to do, if I find it worth the time, I will improve the code whenever I have the time.</p>
<p>The sources can be found <a href="https://github.com/apycazo/marksite">here</a>.</p>
</div>
<div class="content-selector col-md-2" ng-show="$root.bookmark.chapter==1">
            <ul class="list-group"><a href="#" ng-class="{'list-group-item':true, active:$root.bookmark.page==0}" ng-click="$root.bookmark.chapter=1; $root.bookmark.page=0">
                Config</a>
<a href="#" ng-class="{'list-group-item':true, active:$root.bookmark.page==1}" ng-click="$root.bookmark.chapter=1; $root.bookmark.page=1">
                Demo</a></ul></div>
<div class="content-viewport col-md-9 " ng-show="$root.bookmark.chapter==1 && $root.bookmark.page==0"><h1 id="configuring-marksite">Configuring marksite</h1>
<hr>
<h2 id="base-config">Base config</h2>
<p>Marksite requires a json configuration file. By default it will try to find it on <code>./config.json</code>, but a parameter can be passed with
the actual path, for example: <code>node marksite.js test-config.js</code>.</p>
<h2 id="config-file-structure">Config file structure</h2>
<p>An example for a config file looks like this:</p>
<pre><code class="lang-javascript">{
    &quot;title&quot;: &quot;GitHub site [Andres Picazo]&quot;,
    &quot;target&quot;: &quot;index.html&quot;,
    &quot;brand&quot;: &quot;Andrew&#39;s GitHub&quot;,
    &quot;home&quot;: &quot;https://github.com/apycazo?tab=repositories&quot;,
    &quot;favicon&quot;: &quot;https://icons.better-idea.org/icon?size=80..120..200&amp;url=github.com&quot;,
    &quot;source&quot;: &quot;./sources/&quot;,
    &quot;scripts&quot;: [
        &quot;https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js&quot;,
        &quot;https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js&quot;,
        &quot;https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js&quot;,
        &quot;https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js&quot;
    ],
    &quot;styles&quot;: [
        &quot;https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/slate/bootstrap.min.css&quot;,
        &quot;https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/zenburn.min.css&quot;
    ],
    &quot;chapters&quot;: {
        &quot;Home&quot;: [&quot;landing.md&quot;],
        &quot;Marksite&quot;: [
            &quot;marksite/config.md&quot;,
            &quot;marksite/demo.md&quot;
        ],
        &quot;Java | Spring&quot;: [
            &quot;java/java-8-snippets.md&quot;,
            &quot;java/network.md&quot;,
            &quot;java/optional.md&quot;,
            &quot;java/spring-boot-context.md&quot;,
            &quot;java/configuration-properties.md&quot;,
            &quot;java/resource-handling.md&quot;,
            &quot;java/jackson-parser.md&quot;,
            &quot;java/rest-gateway.md&quot;
        ],
        &quot;Maven&quot;: [
            &quot;maven/settings-example.md&quot;,
            &quot;maven/external-properties.md&quot;,
            &quot;maven/repository-configuration.md&quot;
        ],
        &quot;Applications&quot;: [
            &quot;apps/amazon-AWS.md&quot;,
            &quot;apps/intellij-IDEA.md&quot;,
            &quot;apps/git.md&quot;,
            &quot;apps/linux.md&quot;
        ]
    }
}
</code></pre>
<h2 id="config-file-parameters">Config file parameters</h2>
<ul>
<li><strong>target</strong>: this is where do you want the <code>index.html</code> file to be generated.</li>
<li><strong>title</strong>: the page title.</li>
<li><strong>favicon</strong>: If set, use this as a favicon source.</li>
<li><strong>brand</strong>: page navigation bar brand text. This will be linked to the &#39;index&#39; page.</li>
<li><strong>index</strong>: what markdown page to use for the landing page (brand will link to this page).</li>
<li><strong>scripts</strong>: this will be added in the &#39;scripts&#39; section for the page. Note that angular is actually mandatory.</li>
<li><strong>styles</strong>: same, but for text/css files.</li>
<li><strong>source</strong>: This path will be used to prefix all chapter page entries.</li>
<li><strong>chapters</strong>: this describes the site pages, and allows for some organization. Each entry will generate a menu.
If a chapter contains more than one page, a page selector will be added to the view.</li>
</ul>
</div>
<div class="content-viewport col-md-9 " ng-show="$root.bookmark.chapter==1 && $root.bookmark.page==1"><h1 id="marksite-demo-and-test-page">Marksite demo and test page</h1>
<hr>
<p>Italic text uses simple asterisks, like: <em>this is italic text on line 1</em>.<br>Bold text uses double asteriks, like: <strong>this is bold text on line 2</strong>.<br>Striked-through text uses markers, like <del>this is not right on line 3</del>.<br>Also, monospaced is between double ticks: <code>this is robot talking on line 4</code>.<br>This is some <strong>bold text</strong> and <strong>even more bold, with 1234, and (){}_-</strong>.<br>Also, <code>labels</code> can be used to <code>really</code> remark something.<br>Links like <a href="http://apycazo.github.io">my sample page</a> are supported.  </p>
<h2 id="line-breaks">Line breaks</h2>
<hr>
<p>Line breaks are created using two or more spaces.<br>This two lines
are actually rendered together.  </p>
<h2 id="code-view">Code view</h2>
<p>This is an example of java code highlighting:  </p>
<pre><code class="lang-java">@Test
public void checkSessionType ()
{
    given()
            // sends auth info without expecting a requirement for it
            .auth().preemptive().basic(&quot;gandalf&quot;, &quot;the-grey&quot;)
            // now the query should go ok
            .when().get(&quot;private/service&quot;).then().statusCode(HttpStatus.OK.value());

    when().get(&quot;private/service&quot;).then().statusCode(HttpStatus.UNAUTHORIZED.value());
}
</code></pre>
<h2 id="quoting">Quoting</h2>
<hr>
<p>This are some quoting examples:  </p>
<blockquote>
<p>This is a one line quote</p>
</blockquote>
<p>This should be left out</p>
<blockquote>
<p>This is a multiline quote.
It actually continues!.
And <strong>by the way</strong>, other markdown <code>still</code> works!</p>
</blockquote>
<h2 id="lists">Lists</h2>
<hr>
<p>Unordered list:  </p>
<ul>
<li>element 1</li>
<li>element 2</li>
<li>element 3</li>
</ul>
<p>Ordered list:</p>
<ol>
<li>element 1</li>
<li>element 2</li>
<li>element 3</li>
</ol>
<h2 id="lorem-ipsum">Lorem ipsum</h2>
<hr>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec vehicula risus sapien, ut euismod purus gravida id. Nulla ultricies leo odio, ut euismod augue imperdiet vel. Phasellus quam nisi, elementum dignissim ex sed, ornare semper est. Aliquam luctus risus quis sapien semper, eget rutrum leo bibendum. Donec vel mi at urna posuere porta. Nulla tristique pharetra ex at congue. Nunc non vehicula orci. Donec dignissim arcu commodo eros consectetur commodo.</p>
<h1 id="header-l1">Header L1</h1>
<h2 id="header-l2">Header L2</h2>
<h3 id="header-l3">Header L3</h3>
<h4 id="header-l4">Header L4</h4>
</div>
<div class="content-selector col-md-2" ng-show="$root.bookmark.chapter==2">
            <ul class="list-group"><a href="#" ng-class="{'list-group-item':true, active:$root.bookmark.page==0}" ng-click="$root.bookmark.chapter=2; $root.bookmark.page=0">
                Java 8 snippets</a>
<a href="#" ng-class="{'list-group-item':true, active:$root.bookmark.page==1}" ng-click="$root.bookmark.chapter=2; $root.bookmark.page=1">
                Network</a>
<a href="#" ng-class="{'list-group-item':true, active:$root.bookmark.page==2}" ng-click="$root.bookmark.chapter=2; $root.bookmark.page=2">
                Jetty</a>
<a href="#" ng-class="{'list-group-item':true, active:$root.bookmark.page==3}" ng-click="$root.bookmark.chapter=2; $root.bookmark.page=3">
                Spring boot context</a>
<a href="#" ng-class="{'list-group-item':true, active:$root.bookmark.page==4}" ng-click="$root.bookmark.chapter=2; $root.bookmark.page=4">
                Spring mvc</a>
<a href="#" ng-class="{'list-group-item':true, active:$root.bookmark.page==5}" ng-click="$root.bookmark.chapter=2; $root.bookmark.page=5">
                Configuration properties</a>
<a href="#" ng-class="{'list-group-item':true, active:$root.bookmark.page==6}" ng-click="$root.bookmark.chapter=2; $root.bookmark.page=6">
                Resource handling</a>
<a href="#" ng-class="{'list-group-item':true, active:$root.bookmark.page==7}" ng-click="$root.bookmark.chapter=2; $root.bookmark.page=7">
                Jackson parser</a>
<a href="#" ng-class="{'list-group-item':true, active:$root.bookmark.page==8}" ng-click="$root.bookmark.chapter=2; $root.bookmark.page=8">
                Rest gateway</a></ul></div>
<div class="content-viewport col-md-9 " ng-show="$root.bookmark.chapter==2 && $root.bookmark.page==0"><h1 id="java-8">Java 8</h1>
<hr>
<h2 id="java-optional">Java optional</h2>
<pre><code class="lang-java">private static void testOptional ()
{
    log.info(&quot;Testing optional values&quot;);

    String str = &quot;string&quot;;
    String emptyStr = &quot;&quot;;
    String nullStr = null;

    String result;
    result = Optional.ofNullable(nullStr).orElse(&quot;str is null&quot;);
    log.info(&quot;Result (nullString) = &#39;{}&#39;&quot;, result);
    // Logs: Result (nullString) = &#39;str is null&#39;
    result = Optional.ofNullable(emptyStr).orElse(&quot;str is null&quot;);
    log.info(&quot;Result (emptyString) = &#39;{}&#39;&quot;, result);
    // Logs: Result (emptyString) = &#39;&#39;
    result = Optional.ofNullable(str).orElse(&quot;str is null&quot;);
    log.info(&quot;Result (validString) = &#39;{}&#39;&quot;, result);
    // Logs: Result (validString) = &#39;string&#39;
    result = Optional.of(emptyStr).orElse(&quot;str is null&quot;);
    log.info(&quot;Result (emptyString, not nullable) = &#39;{}&#39;&quot;, result);
    // Logs: Result (emptyString, not nullable) = &#39;&#39;
}
</code></pre>
<h2 id="lambda-expressions-and-stream-api">Lambda expressions and stream API</h2>
<pre><code class="lang-java">import java.util.Comparator;
import java.util.LinkedList;
import java.util.List;
import java.util.function.Consumer;
import java.util.function.Function;
import java.util.function.Predicate;

public class J8Reference {

    static String string = &quot;0123456789ABCDEF&quot;;

    static interface Converter {

        String convert(String string);

        default String safeConvert(String string)
        {
            return string == null ? convert(&quot;&quot;) : convert(string);
        }
    }

    static class ConverterMethods {

        String formatA(String string)
        {
            return String.format(&quot;A [%s]&quot;, string);
        }

        String formatB(String string)
        {
            return String.format(&quot;B [%s]&quot;, string);
        }
    }

    static class TestSubject {

        int intValue;
        String stringValue;
        long longValue;

        public TestSubject(int intValue, String stringValue, long longValue)
        {
            this.intValue = intValue;
            this.stringValue = stringValue;
            this.longValue = longValue;
        }

        public int getIntValue()
        {
            return intValue;
        }

        public String getStringValue()
        {
            return stringValue;
        }

        public long getLongValue()
        {
            return longValue;
        }
    }

    public static void testPredicate()
    {

        Predicate&lt;String&gt; p = (x) -&gt; x.length() &gt; 10;
        System.out.println(&quot;Predicate value is &quot; + p.test(string));
    }

    public static void testFunction()
    {

        Function&lt;String, Integer&gt; sizeOf = (x) -&gt; {
            return x == null ? 0 : x.trim().length();
        };

        System.out.println(&quot;Length of string is &quot; + sizeOf.apply(string));
        System.out.println(&quot;Length of null string is &quot; + sizeOf.apply(null));
    }

    public static void testConsumer()
    {

        Consumer&lt;String&gt; consumer = (x) -&gt; {
            System.out.println(&quot;Value to consume is &quot; + x);
        };

        consumer.accept(string);
    }

    public static void testDoubleColon()
    {

        ConverterMethods cm = new ConverterMethods();
        Converter cA = cm::formatA;
        Converter cB = cm::formatB;

        Consumer&lt;String&gt; c = (x) -&gt; {
            System.out.println(&quot;Consuming string&quot;);
            System.out.println(cA.safeConvert(x));
            System.out.println(cB.safeConvert(x));
        };

        c.accept(string);
        c.accept(null);
    }

    private static List&lt;TestSubject&gt; generateSubjects () {

        List&lt;TestSubject&gt; list = new LinkedList&lt;&gt;();
        for (int i = 0; i &lt; 4; i++) {
            TestSubject ts = new TestSubject(i, &quot;i=&quot; + i, i*10);
            list.add(ts);
        }
        return list;
    }

    public static void testSorter()
    {
        System.out.println(&quot;Testing list sorting&quot;);
        List&lt;TestSubject&gt; list = generateSubjects();
        Consumer&lt;TestSubject&gt; c = (x) -&gt; {
            System.out.printf(&quot;[%d:%s:%d]%n&quot;,
                    x.intValue,
                    x.stringValue,
                    x.longValue);
        };

        list.stream().forEach(c);
        list.sort(
                Comparator
                        .comparing(TestSubject::getIntValue)
                        .reversed()
        );
        System.out.println(&quot;Sorted&quot;);
        list.stream().forEach(c);
    }

    public static void testArrayStream()
    {
        String[] strings = {&quot;a&quot;, &quot;b&quot;, &quot;c&quot;};
        Arrays.stream(strings).forEach((x) -&gt; {
            System.out.println(&quot;Value is &quot; + x);
        });
    }

    public static void testMapReduce()
    {

        // Generate a value list
        List&lt;TestSubject&gt; list = TestSubject.samples();
        // Find the test subject with the longest string value
        String s = list.stream()
                .map(TestSubject::getStringValue)
                .reduce(&quot;&quot;, (a, b) -&gt; a.length() &gt;= b.length() ? a : b);
        System.out.println(&quot;Subjects are:&quot;);
        list.stream().forEach((x) -&gt; System.out.println(x.getStringValue()));
        System.out.println(&quot;Longest values is :&quot; + s);
    }

    public static void testSimpleCollect()
    {
        // Generate a value list
        List&lt;TestSubject&gt; list = TestSubject.samples();
        List&lt;String&gt; strList = list.stream()
                .filter(p -&gt; p.getIntValue() &lt; 4)
                .map(TestSubject::getStringValue)
                .collect(Collectors.toList());

        strList.stream().forEach(p -&gt; System.out.println(&quot;Col: &quot; + p));

    }

    public static void testGroupByCollect()
    {
        List&lt;TestSubject&gt; list = TestSubject.samples();
        Map&lt;Long, List&lt;TestSubject&gt;&gt; strList = list.stream().collect(Collectors.groupingBy(TestSubject::getLongValue));
        strList.keySet().stream().forEach(key -&gt; {
                    System.out.println(&quot;K:&quot; + key);
                    List&lt;TestSubject&gt; entry = strList.get(key);
                    entry.stream().forEach(v -&gt; {
                        System.out.println(&quot;\tV:&quot; + v.getStringValue());
                    });
                }
        );
    }

    public static void testCollectionToMap()
    {
        List&lt;TestSubject&gt; list = TestSubject.samples();

        // Alternate to Function.identity() is p -&gt; p        
        Map&lt;Integer, TestSubject&gt; map = list.stream().collect(Collectors.toMap(TestSubject::getIntValue, Function.identity()));

        map.keySet().stream().forEach(key -&gt; {
                    TestSubject value = map.get(key);
                    System.out.println(key + &quot;:&quot; + value.getStringValue());
                }
        );
    }

}
</code></pre>
</div>
<div class="content-viewport col-md-9 " ng-show="$root.bookmark.chapter==2 && $root.bookmark.page==1"><h1 id="getting-network-interfaces">Getting network interfaces</h1>
<hr>
<pre><code class="lang-java">import static java.lang.System.out;
import java.net.InetAddress;
import java.net.NetworkInterface;
import java.net.SocketException;
import java.util.Collections;
import java.util.Enumeration;
import java.util.List;

public class ListNets {

    public void listInterfaces()
    {
        try {
            Enumeration&lt;NetworkInterface&gt; nets = NetworkInterface.getNetworkInterfaces();
            for (NetworkInterface netint : Collections.list(nets)) {
                if (netint.isUp()) {
                    displayInterfaceInformation(netint);
                }
            }
        } catch (Exception e) {
            out.println(&quot;Captured exception: &quot; + e.getClass().getSimpleName());
        }
    }

    public void displayInterfaceInformation(NetworkInterface netint) throws SocketException
    {
        out.printf(&quot;Display name: %s\n&quot;, netint.getDisplayName());
        out.printf(&quot;Name: %s\n&quot;, netint.getName());
        Enumeration&lt;InetAddress&gt; inetAddresses = netint.getInetAddresses();
        List&lt;InetAddress&gt; list = Collections.list(inetAddresses);
        list.forEach(addr -&gt; {
            out.printf(&quot;InetAddress: %s\n&quot;, addr);
        });
        out.printf(&quot;\n&quot;);
    }
}
</code></pre>
</div>
<div class="content-viewport col-md-9 " ng-show="$root.bookmark.chapter==2 && $root.bookmark.page==2"><h1 id="jetty-customization">Jetty customization</h1>
<hr>
<h2 id="spring-boot-properties">Spring boot properties</h2>
<p><a href="https://github.com/spring-projects/spring-boot/blob/v1.5.2.RELEASE/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/web/ServerProperties.java">ServerProperties</a></p>
<pre><code>server.address= # Network address to which the server should bind to.
server.compression.enabled=false # If response compression is enabled.
server.compression.excluded-user-agents= # List of user-agents to exclude from compression.
server.compression.mime-types= # Comma-separated list of MIME types that should be compressed. For instance `text/html,text/css,application/json`
server.compression.min-response-size= # Minimum response size that is required for compression to be performed. For instance 2048
server.connection-timeout= # Time in milliseconds that connectors will wait for another HTTP request before closing the connection. When not set, the connector&#39;s container-specific default will be used. Use a value of -1 to indicate no (i.e. infinite) timeout.
server.context-parameters.*= # Servlet context init parameters. For instance `server.context-parameters.a=alpha`
server.context-path= # Context path of the application.
server.display-name=application # Display name of the application.
server.max-http-header-size=0 # Maximum size in bytes of the HTTP message header.
server.error.include-stacktrace=never # When to include a &quot;stacktrace&quot; attribute.
server.error.path=/error # Path of the error controller.
server.error.whitelabel.enabled=true # Enable the default error page displayed in browsers in case of a server error.
server.jetty.acceptors= # Number of acceptor threads to use.
server.jetty.max-http-post-size=0 # Maximum size in bytes of the HTTP post or put content.
server.jetty.selectors= # Number of selector threads to use.
server.jsp-servlet.class-name=org.apache.jasper.servlet.JspServlet # The class name of the JSP servlet.
server.jsp-servlet.init-parameters.*= # Init parameters used to configure the JSP servlet
server.jsp-servlet.registered=true # Whether or not the JSP servlet is registered
server.port=8080 # Server HTTP port.
server.server-header= # Value to use for the Server response header (no header is sent if empty)
server.servlet-path=/ # Path of the main dispatcher servlet.
server.use-forward-headers= # If X-Forwarded-* headers should be applied to the HttpRequest.
server.session.cookie.comment= # Comment for the session cookie.
server.session.cookie.domain= # Domain for the session cookie.
server.session.cookie.http-only= # &quot;HttpOnly&quot; flag for the session cookie.
server.session.cookie.max-age= # Maximum age of the session cookie in seconds.
server.session.cookie.name= # Session cookie name.
server.session.cookie.path= # Path of the session cookie.
server.session.cookie.secure= # &quot;Secure&quot; flag for the session cookie.
server.session.persistent=false # Persist session data between restarts.
server.session.store-dir= # Directory used to store session data.
server.session.timeout= # Session timeout in seconds.
server.session.tracking-modes= # Session tracking modes (one or more of the following: &quot;cookie&quot;, &quot;url&quot;, &quot;ssl&quot;).
server.ssl.ciphers= # Supported SSL ciphers.
server.ssl.client-auth= # Whether client authentication is wanted (&quot;want&quot;) or needed (&quot;need&quot;). Requires a trust store.
server.ssl.enabled= # Enable SSL support.
server.ssl.enabled-protocols= # Enabled SSL protocols.
server.ssl.key-alias= # Alias that identifies the key in the key store.
server.ssl.key-password= # Password used to access the key in the key store.
server.ssl.key-store= # Path to the key store that holds the SSL certificate (typically a jks file).
server.ssl.key-store-password= # Password used to access the key store.
server.ssl.key-store-provider= # Provider for the key store.
server.ssl.key-store-type= # Type of the key store.
server.ssl.protocol=TLS # SSL protocol to use.
server.ssl.trust-store= # Trust store that holds SSL certificates.
server.ssl.trust-store-password= # Password used to access the trust store.
server.ssl.trust-store-provider= # Provider for the trust store.
server.ssl.trust-store-type= # Type of the trust store.
server.tomcat.accept-count= # Maximum queue length for incoming connection requests when all possible request processing threads are in use.
server.tomcat.accesslog.buffered=true # Buffer output such that it is only flushed periodically.
server.tomcat.accesslog.directory=logs # Directory in which log files are created. Can be relative to the tomcat base dir or absolute.
server.tomcat.accesslog.enabled=false # Enable access log.
server.tomcat.accesslog.pattern=common # Format pattern for access logs.
server.tomcat.accesslog.prefix=access_log # Log file name prefix.
server.tomcat.accesslog.rename-on-rotate=false # Defer inclusion of the date stamp in the file name until rotate time.
server.tomcat.accesslog.request-attributes-enabled=false # Set request attributes for IP address, Hostname, protocol and port used for the request.
server.tomcat.accesslog.rotate=true # Enable access log rotation.
server.tomcat.accesslog.suffix=.log # Log file name suffix.
server.tomcat.additional-tld-skip-patterns= # Comma-separated list of additional patterns that match jars to ignore for TLD scanning.
server.tomcat.background-processor-delay=30 # Delay in seconds between the invocation of backgroundProcess methods.
server.tomcat.basedir= # Tomcat base directory. If not specified a temporary directory will be used.
server.tomcat.internal-proxies=10\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}|\\
        192\\.168\\.\\d{1,3}\\.\\d{1,3}|\\
        169\\.254\\.\\d{1,3}\\.\\d{1,3}|\\
        127\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}|\\
        172\\.1[6-9]{1}\\.\\d{1,3}\\.\\d{1,3}|\\
        172\\.2[0-9]{1}\\.\\d{1,3}\\.\\d{1,3}|\\
        172\\.3[0-1]{1}\\.\\d{1,3}\\.\\d{1,3} # regular expression matching trusted IP addresses.
server.tomcat.max-connections= # Maximum number of connections that the server will accept and process at any given time.
server.tomcat.max-http-post-size=0 # Maximum size in bytes of the HTTP post content.
server.tomcat.max-threads=0 # Maximum amount of worker threads.
server.tomcat.min-spare-threads=0 # Minimum amount of worker threads.
server.tomcat.port-header=X-Forwarded-Port # Name of the HTTP header used to override the original port value.
server.tomcat.protocol-header= # Header that holds the incoming protocol, usually named &quot;X-Forwarded-Proto&quot;.
server.tomcat.protocol-header-https-value=https # Value of the protocol header that indicates that the incoming request uses SSL.
server.tomcat.redirect-context-root= # Whether requests to the context root should be redirected by appending a / to the path.
server.tomcat.remote-ip-header= # Name of the http header from which the remote ip is extracted. For instance `X-FORWARDED-FOR`
server.tomcat.uri-encoding=UTF-8 # Character encoding to use to decode the URI.
server.undertow.accesslog.dir= # Undertow access log directory.
server.undertow.accesslog.enabled=false # Enable access log.
server.undertow.accesslog.pattern=common # Format pattern for access logs.
server.undertow.accesslog.prefix=access_log. # Log file name prefix.
server.undertow.accesslog.rotate=true # Enable access log rotation.
server.undertow.accesslog.suffix=log # Log file name suffix.
server.undertow.buffer-size= # Size of each buffer in bytes.
server.undertow.buffers-per-region= # Number of buffer per region.
server.undertow.direct-buffers= # Allocate buffers outside the Java heap.
server.undertow.io-threads= # Number of I/O threads to create for the worker.
server.undertow.max-http-post-size=0 # Maximum size in bytes of the HTTP post content.
server.undertow.worker-threads= # Number of worker threads.
</code></pre><h2 id="servlet-customization">Servlet customization</h2>
<pre><code class="lang-java">@Slf4j
@Configuration
public class CustomJettyServer
{
    @Value(&quot;${server.port:8080}&quot;)
    private int serverPort;
    @Value(&quot;${jetty.threadPool.minThreads:50}&quot;)
    private int minThreads;
    @Value(&quot;${jetty.threadPool.maxThreads:200}&quot;)
    private int maxThreads;
    @Value(&quot;${jetty.threadPool.idleTimeout:60000}&quot;)
    private int idleTimeout;

    @Bean
    public JettyEmbeddedServletContainerFactory jettyEmbeddedServletContainerFactory()
    {
        final JettyEmbeddedServletContainerFactory factory = new JettyEmbeddedServletContainerFactory(serverPort);

        factory.addServerCustomizers((server) -&gt; {
            QueuedThreadPool threadPool = server.getBean(QueuedThreadPool.class);
            threadPool.setMaxThreads(maxThreads);
            threadPool.setMinThreads(minThreads);
            threadPool.setIdleTimeout(idleTimeout);

            // Only if traffic logging is required
            NCSARequestLog requestLog = new NCSARequestLog();
            requestLog.setFilename(&quot;traffic.log&quot;);
            requestLog.setFilenameDateFormat(&quot;yyyy-MM-dd&quot;);
            requestLog.setRetainDays(1);
            requestLog.setAppend(true);
            requestLog.setExtended(true);
            requestLog.setLogCookies(false);
            requestLog.setLogTimeZone(&quot;GMT&quot;);
            server.setRequestLog(requestLog);
        });

        return factory;
    }
}
</code></pre>
</div>
<div class="content-viewport col-md-9 " ng-show="$root.bookmark.chapter==2 && $root.bookmark.page==3"><h1 id="spring-boot-context">Spring boot context</h1>
<hr>
<h3 id="run-after-context-loads">Run after context loads</h3>
<pre><code class="lang-java">@Slf4j
@Component
public class AfterContextLoads implements ApplicationListener&lt;ContextRefreshedEvent&gt; {

    @Override
    public void onApplicationEvent(ContextRefreshedEvent event)
    {
        log.info(&quot;--- READY ---&quot;);
        // just so a report can be logger after startup.
    }
}
</code></pre>
<h3 id="test-url-after-context-loads">Test URL after context loads</h3>
<pre><code class="lang-java">@Slf4j
@Component
public class SetupTest implements ApplicationListener&lt;EmbeddedServletContainerInitializedEvent&gt; {

    @Autowired
    private ServletContext servletContext;

    @Override
    public void onApplicationEvent(EmbeddedServletContainerInitializedEvent event)
    {
        // Base url
        String base = &quot;http://127.0.0.1&quot;;
        int port = event.getEmbeddedServletContainer().getPort();
        String contextPath = servletContext.getContextPath();
        String url = base + &quot;:&quot; + port + contextPath + &quot;/echo-test&quot;;

        RestTemplate rest = new RestTemplate();
        try {            
            URI uri = new URI(url);
            ResponseEntity&lt;String&gt; response = rest.getForEntity(uri, String.class);
            log.info(&quot;Echo test on {}&quot;, uri.toString());
            log.info(&quot;Check response... {}&quot;, (response == null ? &quot;KO&quot; : &quot;OK&quot;));
            if (response != null) {
                log.info(&quot;Check status...   {}&quot;,
                        (response.getStatusCode() != HttpStatus.OK ? &quot;KO&quot; : &quot;OK&quot;));
                log.info(&quot;Check body...     {}&quot;,
                        (response.getBody() == null || response.getBody().isEmpty() ? &quot;KO&quot; : &quot;OK&quot;));
            }
        } catch (URISyntaxException | RestClientException e) {
            log.warn(&quot;Unable to generate test query url {}&quot;, url, e);
        }
    }
}
</code></pre>
</div>
<div class="content-viewport col-md-9 " ng-show="$root.bookmark.chapter==2 && $root.bookmark.page==4"><h1 id="spring-mvc">Spring MVC</h1>
<h2 id="content-negotiation-custom-">Content negotiation (custom)</h2>
<pre><code class="lang-java">@Slf4j
@Configuration
@EnableWebMvc
public class StatusConfig extends WebMvcConfigurerAdapter
{
    @Override
    public void configureContentNegotiation(ContentNegotiationConfigurer configurer)
    {
        // No header, No extension -&gt; JSON
        // Header, No extension -&gt; Header.type
        // Header, Extension -&gt; Extension.type
        configurer.favorPathExtension(true)
                .useJaf(false) // to allow us to define media types manually
                .defaultContentType(MediaType.APPLICATION_JSON)
                .mediaType(&quot;xml&quot;, MediaType.APPLICATION_XML)
                .mediaType(&quot;json&quot;, MediaType.APPLICATION_JSON);
    }
}
</code></pre>
<h2 id="async-rest-template">Async rest template</h2>
<pre><code class="lang-java">HttpHeaders jsonHeaders = new HttpHeaders();
jsonHeaders.setAccept(Collections.singletonList(MediaType.APPLICATION_JSON));
jsonHeaders.setContentType(MediaType.APPLICATION_JSON);
// create entity to be sent
HttpEntity&lt;EventMessage&gt; entity = new HttpEntity&lt;&gt;(eventMessage, jsonHeaders);
// send async post request
ListenableFuture&lt;ResponseEntity&lt;Void&gt;&gt; futureEntity;
futureEntity = rest.exchange(targetEndpoint, HttpMethod.POST, entity, Void.class);
// add callbacks (success: do nothing, failure: log error)
futureEntity.addCallback(
    (ok) -&gt; {},
    (err) -&gt; log.warn(&quot;Forwarding error: {} ({})&quot;, err.getClass().getSimpleName(), err.getMessage())
);
</code></pre>
<h2 id="rest-template-exchange">Rest template exchange</h2>
<pre><code class="lang-java">URI uri = new UriTemplate(&quot;http://example.com/{foo}&quot;).expand(&quot;bar&quot;);
String response = new RestTemplate()
    .exchange(RequestEntity.post(uri).accept(MediaType.APPLICATION_JSON).body(&quot;sample&quot;), String.class)
    .getBody();
</code></pre>
</div>
<div class="content-viewport col-md-9 " ng-show="$root.bookmark.chapter==2 && $root.bookmark.page==5"><h1 id="configuration-properties">Configuration properties</h1>
<hr>
<h3 id="add-properties-without-annotations">Add properties without annotations</h3>
<pre><code class="lang-java">@Bean
public static PropertySourcesPlaceholderConfigurer placeHolderConfigurer() {
    PropertySourcesPlaceholderConfigurer propertyConfigurer = new PropertySourcesPlaceholderConfigurer();
    propertyConfigurer.setLocations(new PathMatchingResourcePatternResolver().getResources(&quot;classpath:/**/abc.properties&quot;));
    return propertyConfigurer;
}
</code></pre>
<h3 id="validate-configproperties-fields">Validate ConfigProperties fields</h3>
<pre><code class="lang-java">@NotNull
@Pattern(regexp = &quot;\\w+&quot;, message = &quot;ID must only contains letters, numbers and &#39;_&#39;&quot;)
private String id;
</code></pre>
</div>
<div class="content-viewport col-md-9 " ng-show="$root.bookmark.chapter==2 && $root.bookmark.page==6"><h1 id="resources">Resources</h1>
<hr>
<h3 id="add-path-handlers">Add path handlers</h3>
<pre><code class="lang-java">@Configuration
@EnableWebMvc
public class WebResourceConfig extends WebMvcConfigurerAdapter {

    @Override
    public void addResourceHandlers(ResourceHandlerRegistry registry) {
        registry
                .addResourceHandler(&quot;/static/**/*&quot;)                
                .addResourceLocations(
                        &quot;/resources/static/test&quot;,
                        &quot;/resources/static/common&quot;
                );
    }
}
</code></pre>
</div>
<div class="content-viewport col-md-9 " ng-show="$root.bookmark.chapter==2 && $root.bookmark.page==7"><h1 id="jackson-parser">Jackson parser</h1>
<hr>
<h2 id="spring-boot-properties">Spring boot properties</h2>
<pre><code>spring.jackson.date-format= # Date format string or a fully-qualified date format class name. For instance `yyyy-MM-dd HH:mm:ss`.
spring.jackson.default-property-inclusion= # Controls the inclusion of properties during serialization.
spring.jackson.deserialization.*= # Jackson on/off features that affect the way Java objects are deserialized.
spring.jackson.generator.*= # Jackson on/off features for generators.
spring.jackson.joda-date-time-format= # Joda date time format string. If not configured, &quot;date-format&quot; will be used as a fallback if it is configured with a format string.
spring.jackson.locale= # Locale used for formatting.
spring.jackson.mapper.*= # Jackson general purpose on/off features.
spring.jackson.parser.*= # Jackson on/off features for parsers.
spring.jackson.property-naming-strategy= # One of the constants on Jackson&#39;s PropertyNamingStrategy. Can also be a fully-qualified class name of a PropertyNamingStrategy subclass.
spring.jackson.serialization.*= # Jackson on/off features that affect the way Java objects are serialized.
spring.jackson.time-zone= # Time zone used when formatting dates. For instance `America/Los_Angeles`
</code></pre><h2 id="ignore-null-values">Ignore null values</h2>
<pre><code class="lang-java">@JsonInclude(Include.NON_NULL)
class Foo
{
  String bar;
}
</code></pre>
<h2 id="ignore-empty-values">Ignore empty values</h2>
<pre><code class="lang-java">@JsonInclude(Include.NON_EMPTY)
class Foo
{
  String bar;
}
</code></pre>
<h2 id="ignore-unknown-fields">Ignore unknown fields</h2>
<pre><code class="lang-java">@JsonIgnoreProperties(ignoreUnknown = true)
class Foo
{
  String bar;
}
</code></pre>
<h2 id="serialize-field-order-default-is-alphabetic-">Serialize field order (default is alphabetic)</h2>
<p><em>Note</em>: Not all fields are required.</p>
<pre><code class="lang-java">@JsonPropertyOrder({ &quot;id&quot;, &quot;firstname&quot;, &quot;lastname&quot; })
public class User {
    private Long id;
    private String firstname;
    private String lastname;
}
</code></pre>
<h2 id="include-class-info-when-polymorphic">Include class info when polymorphic</h2>
<p>Read about this <a href="http://wiki.fasterxml.com/JacksonPolymorphicDeserialization">here</a></p>
<pre><code class="lang-java">@JsonTypeInfo(use=JsonTypeInfo.Id.CLASS, include=JsonTypeInfo.As.PROPERTY, property=&quot;@class&quot;)
@JsonSubTypes({@Type(value = Foo.class), @Type(value = Bar.class)})
public interface Itf
{
    // whatever
}

public class Foo implements Itf {}
public class Bar implements Itf {}
</code></pre>
</div>
<div class="content-viewport col-md-9 " ng-show="$root.bookmark.chapter==2 && $root.bookmark.page==8"><h1 id="rest-gateway">Rest gateway</h1>
<hr>
<p>A simple implementation of a rest service. It just collects and publishes services inside an API.
This reference requires updates from latest Spring Boot version.</p>
<h2 id="gateway">Gateway</h2>
<pre><code class="lang-java">@Slf4j
@RestController
@RequestMapping(value = &quot;gateway&quot;)
public class Gateway
{
    @Autowired(required = false)
    protected GatewayService[] services;
    protected Map&lt;String, GatewayService&gt; serviceMap;
    protected final ObjectMapper mapper;

    // JSONP support
    @ControllerAdvice
    protected static class JsonpAdvice extends AbstractJsonpResponseBodyAdvice
    {
        public JsonpAdvice()
        {
            super(&quot;callback&quot;);
            log.info(
                    &quot;{} has JSONP support enabled&quot;,
                    Gateway.class.getSimpleName());
        }
    }

    public Gateway()
    {
        mapper = new ObjectMapper();
        mapper.configure(JsonParser.Feature.ALLOW_SINGLE_QUOTES, true);
    }

    protected String jsonStringError(String msg, HttpStatus status, Exception ex)
    {
        Map&lt;String, Object&gt; map = new LinkedHashMap&lt;&gt;();
        map.put(&quot;success&quot;, Boolean.FALSE);
        map.put(&quot;httpStatus&quot;, status.name());
        map.put(&quot;timestamp&quot;, System.currentTimeMillis());
        map.put(&quot;message&quot;, msg);
        if (ex != null) {
            map.put(&quot;isException&quot;, Boolean.TRUE);
            map.put(&quot;exceptionName&quot;, ex.getClass().getSimpleName());
            try {
                StackTraceElement stackTop = ex.getStackTrace()[0];
                map.put(&quot;methodName&quot;, stackTop.getMethodName());
                map.put(&quot;methodLine&quot;, stackTop.getLineNumber());
            } catch (ArrayIndexOutOfBoundsException e) {
                // Does not include stack
            }
        }
        try {
            return mapper.writeValueAsString(map);
        } catch (Exception e) {
            return &quot;{\&quot;success\&quot;:false}&quot;;
        }
    }

    @PostConstruct
    protected void setup()
    {
        serviceMap = new HashMap&lt;&gt;();
        if (services == null) {
            log.info(&quot;Gateway service has no actual services&quot;);
            services = new GatewayService[0];
        } else {
            for (GatewayService service : services) {
                String serviceName = service.getServiceName();
                serviceMap.put(serviceName, service);
                log.info(&quot;Registered gateway service &#39;{}&#39;&quot;, serviceName);
            }
        }
    }

    @RequestMapping(method = GET)
    public Map&lt;String, Map&lt;String, String&gt;&gt; serviceNames(HttpServletRequest request) throws MalformedURLException
    {
        Map&lt;String, Map&lt;String, String&gt;&gt; response = new LinkedHashMap&lt;&gt;();

        String urlString = request.getRequestURL().toString();
        if (false == urlString.endsWith(&quot;/&quot;)) urlString += &quot;/&quot;;
        URL baseURL = new URL(urlString);

        serviceMap.keySet().stream().forEach(
                (e) -&gt; {
                    Map&lt;String, String&gt; info = new LinkedHashMap&lt;&gt;();
                    try {
                        URL url = new URL(baseURL, e);
                        info.put(&quot;href&quot;, url.toString());
                    } catch (MalformedURLException ex) {
                        info.put(&quot;href&quot;, &quot;&quot;);
                        info.put(&quot;ex&quot;, ex.getClass().getSimpleName());
                    } finally {
                        response.put(e, info);
                    }
                }
        );

        return response;
    }

    @RequestMapping(
            method = GET,
            value = &quot;{serviceName}&quot;,
            produces = MediaType.APPLICATION_JSON_VALUE)
    public ResponseEntity getAsJson(
            HttpServletRequest request,
            @RequestBody(required = false) Optional&lt;String&gt; body,
            @PathVariable String serviceName)
    {
        // fetch service
        GatewayService service = serviceMap.get(serviceName);
        // Make sure body is not null, even if its empty
        body = body != null ? body : Optional.empty();
        if (service == null) {
            String msg = &quot;Service &quot; + serviceName + &quot; does not exist.&quot;;
            HttpStatus status = HttpStatus.BAD_REQUEST;
            String error = jsonStringError(msg, status, null);
            return new ResponseEntity(error, status);
        }
        // Run service process
        Object result = service.processRequest(request, body);
        return new ResponseEntity(result, HttpStatus.OK);
    }
}
</code></pre>
<h2 id="gateway-service">Gateway service</h2>
<pre><code class="lang-java">public interface GatewayService
{
    String getServiceName();
    default String getServiceVersion()
    {
        return &quot;SNAPSHOT&quot;;
    }

    default HttpMethod [] getOptions ()
    {
        return new HttpMethod [] { HttpMethod.OPTIONS, HttpMethod.GET };
    }

    Object processRequest(HttpServletRequest request, Optional&lt;String&gt; body);
}
</code></pre>
</div>
<div class="content-selector col-md-2" ng-show="$root.bookmark.chapter==3">
            <ul class="list-group"><a href="#" ng-class="{'list-group-item':true, active:$root.bookmark.page==0}" ng-click="$root.bookmark.chapter=3; $root.bookmark.page=0">
                Settings example</a>
<a href="#" ng-class="{'list-group-item':true, active:$root.bookmark.page==1}" ng-click="$root.bookmark.chapter=3; $root.bookmark.page=1">
                External properties</a>
<a href="#" ng-class="{'list-group-item':true, active:$root.bookmark.page==2}" ng-click="$root.bookmark.chapter=3; $root.bookmark.page=2">
                Repository configuration</a></ul></div>
<div class="content-viewport col-md-9 " ng-show="$root.bookmark.chapter==3 && $root.bookmark.page==0"><h1 id="maven-settings-example">Maven settings example</h1>
<hr>
<pre><code class="lang-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;settings xmlns=&quot;http://maven.apache.org/SETTINGS/1.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd&quot;&gt;
    &lt;localRepository&gt;${user.home}/.m2/repository&lt;/localRepository&gt;
    &lt;interactiveMode&gt;true&lt;/interactiveMode&gt;
    &lt;usePluginRegistry&gt;false&lt;/usePluginRegistry&gt;
    &lt;offline&gt;false&lt;/offline&gt;
    &lt;servers&gt;
        &lt;server&gt;
            &lt;id&gt;demo-server&lt;/id&gt;
            &lt;username&gt;root&lt;/username&gt;
            &lt;password&gt;root&lt;/password&gt;
        &lt;/server&gt;
    &lt;/servers&gt;
    &lt;mirrors /&gt;
    &lt;proxies&gt;
        &lt;proxy&gt;
            &lt;id&gt;optional&lt;/id&gt;
            &lt;active&gt;true&lt;/active&gt;
            &lt;protocol&gt;http&lt;/protocol&gt;
            &lt;!--
            &lt;username&gt;optional-proxyuser&lt;/username&gt;
            &lt;password&gt;optional-proxypass&lt;/password&gt;
            --&gt;
            &lt;host&gt;proxy.safezone.com&lt;/host&gt;
            &lt;port&gt;8000&lt;/port&gt;
            &lt;nonProxyHosts&gt;localhost | 127.0.0.1&lt;/nonProxyHosts&gt;
        &lt;/proxy&gt;
    &lt;/proxies&gt;
&lt;/settings&gt;
</code></pre>
</div>
<div class="content-viewport col-md-9 " ng-show="$root.bookmark.chapter==3 && $root.bookmark.page==1"><h1 id="maven-external-properties">Maven external properties</h1>
<hr>
<pre><code class="lang-xml">&lt;plugin&gt;
    &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
    &lt;artifactId&gt;properties-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;${properties.maven.plugin.version}&lt;/version&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;phase&gt;initialize&lt;/phase&gt;
            &lt;goals&gt;
                &lt;goal&gt;read-project-properties&lt;/goal&gt;
            &lt;/goals&gt;
            &lt;configuration&gt;
                &lt;files&gt;
                    &lt;file&gt;src/main/${env}/config-${env}.properties&lt;/file&gt;
                &lt;/files&gt;
            &lt;/configuration&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
&lt;/plugin&gt;
</code></pre>
</div>
<div class="content-viewport col-md-9 " ng-show="$root.bookmark.chapter==3 && $root.bookmark.page==2"><h1 id="distribution-management-config">Distribution management config</h1>
<hr>
<pre><code class="lang-xml">&lt;distributionManagement&gt;
    &lt;repository&gt;
        &lt;id&gt;test-repo&lt;/id&gt;
        &lt;name&gt;test-repo&lt;/name&gt;
        &lt;url&gt;http://127.0.0.1:8000/repository/&lt;/url&gt;
    &lt;/repository&gt;
&lt;/distributionManagement&gt;
</code></pre>
<h1 id="local-repository">Local repository</h1>
<hr>
<pre><code class="lang-xml">&lt;repository&gt;
    &lt;id&gt;localrepo&lt;/id&gt;
    &lt;name&gt;localrepo&lt;/name&gt;
    &lt;url&gt;file://${basedir}/deps&lt;/url&gt;
&lt;/repository&gt;
</code></pre>
</div>
<div class="content-selector col-md-2" ng-show="$root.bookmark.chapter==4">
            <ul class="list-group"><a href="#" ng-class="{'list-group-item':true, active:$root.bookmark.page==0}" ng-click="$root.bookmark.chapter=4; $root.bookmark.page=0">
                Amazon AWS</a>
<a href="#" ng-class="{'list-group-item':true, active:$root.bookmark.page==1}" ng-click="$root.bookmark.chapter=4; $root.bookmark.page=1">
                Intellij IDEA</a>
<a href="#" ng-class="{'list-group-item':true, active:$root.bookmark.page==2}" ng-click="$root.bookmark.chapter=4; $root.bookmark.page=2">
                Git</a>
<a href="#" ng-class="{'list-group-item':true, active:$root.bookmark.page==3}" ng-click="$root.bookmark.chapter=4; $root.bookmark.page=3">
                Linux</a>
<a href="#" ng-class="{'list-group-item':true, active:$root.bookmark.page==4}" ng-click="$root.bookmark.chapter=4; $root.bookmark.page=4">
                Mysql cluster</a>
<a href="#" ng-class="{'list-group-item':true, active:$root.bookmark.page==5}" ng-click="$root.bookmark.chapter=4; $root.bookmark.page=5">
                Docker</a></ul></div>
<div class="content-viewport col-md-9 " ng-show="$root.bookmark.chapter==4 && $root.bookmark.page==0"><h1 id="amazon-vm-config">Amazon VM config</h1>
<hr>
<h2 id="links">Links</h2>
<p><a href="http://technotes.khitrenovich.com/opening-ssh-aws-hosted-linux-servers-mremoteng/">MRemoteNG config</a><br><a href="https://aws.amazon.com/es/getting-started/tutorials/launch-a-virtual-machine/">Getting started</a></p>
<h2 id="login">Login</h2>
<p>User names seems to include:</p>
<ol>
<li>root</li>
<li>ec2-user</li>
<li>ubuntu</li>
</ol>
<h2 id="reenable-password-access">Reenable password access</h2>
<ol>
<li>Login as root using key pairs</li>
<li>Create user with  <code>sudo adduser USERNAME</code> and set password  <code>sudo passwd USERNAME</code></li>
<li>Edit /etc/ssh/sshd_config setting: <code>PasswordAuthentication yes</code></li>
<li>Restart daemon: <code>sudo service sshd restart</code></li>
</ol>
</div>
<div class="content-viewport col-md-9 " ng-show="$root.bookmark.chapter==4 && $root.bookmark.page==1"><h1 id="intellij-idea-notes">IntelliJ IDEA notes</h1>
<hr>
<h2 id="shortcuts">Shortcuts</h2>
<table>
<thead>
<tr>
<th>Operation</th>
<th>Shortcut</th>
</tr>
</thead>
<tbody>
<tr>
<td>Auto format code</td>
<td>Ctrl + Alt + L</td>
</tr>
<tr>
<td>Comment code</td>
<td>Ctrl + /</td>
</tr>
<tr>
<td>Open &#39;find everywhere&#39; tab</td>
<td>Shift x2</td>
</tr>
<tr>
<td>New line (begin)</td>
<td>Shift + Enter</td>
</tr>
<tr>
<td>Duplicate line</td>
<td>Ctrl + D</td>
</tr>
<tr>
<td>Remove line</td>
<td>Ctrl + Y</td>
</tr>
<tr>
<td>Move line UP</td>
<td>Ctrl + Shift + UP</td>
</tr>
<tr>
<td>Move line DOWN</td>
<td>Ctrl + Shift + DOWN</td>
</tr>
<tr>
<td>Select custom fold (fcom)</td>
<td>Ctrl + Alt + .</td>
</tr>
<tr>
<td>Create test</td>
<td>Alt + Enter</td>
</tr>
<tr>
<td>Override/Implement method</td>
<td>Ctrl + O</td>
</tr>
<tr>
<td>Custom fold</td>
<td>(select) Ctrl + Alt + T</td>
</tr>
<tr>
<td>Insert live template</td>
<td>Ctrl + J</td>
</tr>
<tr>
<td>Wrap with live template</td>
<td>Ctrl + Alt + J</td>
</tr>
</tbody>
</table>
<h2 id="plugins">Plugins</h2>
<ul>
<li>DBNavigator</li>
<li>Awesome console</li>
<li>Lombok</li>
<li>Grep console</li>
<li>VisualVM Launcher (if <a href="https://visualvm.github.io/download.html">https://visualvm.github.io/download.html</a> is installed)</li>
<li>Quick notes</li>
</ul>
<h2 id="settings">Settings</h2>
<p>Editor -&gt;Code style -&gt; Java</p>
<ul>
<li>Braces placement: next line (class and method declaration)</li>
</ul>
<p>Editor -&gt; Code style -&gt; YAML</p>
<ul>
<li>Indent: 4</li>
</ul>
<p>Editor -&gt; General -&gt; Auto import (Java)</p>
<ul>
<li>Check &#39;optimize imports on the fly&#39;</li>
<li>Check &#39;Add unambiguous imports on the fly&#39;</li>
</ul>
<h2 id="live-templates">Live templates</h2>
<p>Editor -&gt; Live templates
Create a new group (for example, &#39;custom&#39;)</p>
<p>Sample live template (abbreviation: &#39;t-rest-echo&#39;, applicable in &#39;Java declaration&#39;)</p>
<pre><code class="lang-java">@RequestMapping(value = &quot;&quot;, method = RequestMethod.GET)
public ResponseEntity&lt;Map&lt;String,Object&gt;&gt; echo ()
{
    Map&lt;String,Object&gt; map = new LinkedHashMap&lt;&gt;();
    map.put(&quot;success&quot;, true);
    map.put(&quot;method&quot;, &quot;echo&quot;);
    map.put(&quot;ts&quot;, System.currentTimeMillis());
    return new ResponseEntity&lt;&gt;(map, HttpStatus.OK);
}
</code></pre>
</div>
<div class="content-viewport col-md-9 " ng-show="$root.bookmark.chapter==4 && $root.bookmark.page==2"><h1 id="git-cheatsheet">Git cheatsheet</h1>
<hr>
<h2 id="setup">Setup</h2>
<p><strong>User name and email</strong><br><code>$ git config --global user.name &quot;John Doe&quot;</code><br><code>$ git config --global user.email johndoe@example.com</code></p>
<p><strong>Configure line endings to linux style</strong><br><code>git config --global core.autocrlf input</code></p>
<h2 id="aliasing">Aliasing</h2>
<p>Using command line:</p>
<pre><code>$ git config --global alias.co checkout
$ git config --global alias.br branch
$ git config --global alias.ci commit
$ git config --global alias.st status
</code></pre><p>Or edit <code>~/.gitconfig</code> file.</p>
<h2 id="commands">Commands</h2>
<ul>
<li>Get repository: <code>git clone &lt;repo url&gt;</code></li>
<li>Switch branches: <code>git checkout &lt;branchname&gt;</code></li>
<li>Create a new branch and check it out: <code>git checkout -b &lt;branchname&gt;</code></li>
<li>List branches (local &amp; remote): <code>git branch -av</code></li>
<li>Add files: <code>git add &lt;files&gt;</code> or <code>git add *</code> (all) or <code>git add .</code> (existing on remote).</li>
<li>Commit: <code>git commit -m &quot;&lt;commit info&gt;&quot;</code></li>
<li>Check status: <code>git status</code></li>
<li>Send changes to branch: <code>git push origin &lt;branchName&gt;</code></li>
<li>Add remote repo: <code>git remote add origin &lt;server&gt;</code></li>
<li>Delete local branch: <code>git branch -d &lt;branchname&gt;</code></li>
<li>Delete remote branch: <code>git push origin --delete &lt;branchname&gt;</code></li>
<li>Fetch and merge changes: <code>git pull</code> or <code>git pull origin &lt;branchname&gt;</code></li>
<li>Update cache: <code>git fetch</code></li>
<li>Update remotes: <code>git remote update</code></li>
<li>Merge <branchname> into active branch: <code>git merge &lt;branchname&gt;</code></li>
<li>Show log: <code>git log</code></li>
<li>Tag commit: <code>git tag &lt;tag name&gt; &lt;commitID&gt;</code></li>
<li>Upload tags: <code>git push --tags origin</code></li>
</ul>
</div>
<div class="content-viewport col-md-9 " ng-show="$root.bookmark.chapter==4 && $root.bookmark.page==3"><h1 id="linux-notes">Linux notes</h1>
<h2 id="fedora-after-install-steps">Fedora after install steps</h2>
<h4 id="set-hostname">Set hostname</h4>
<pre><code>hostnamectl status
hostnamectl set-hostname --static “sandbox”
</code></pre><h4 id="basic-install">Basic install</h4>
<pre><code>dnf update
dnf install -y vim dkms java-1.8.0-openjdk nodejs net-tools
dnf groupinstall -y “Development tools”
</code></pre><p>Also useful:</p>
<pre><code>dnf install -y dconf-editor gnome-shell-browser-plugin gnome-tweak-tool gnome-shell-extension-user-theme
</code></pre><h4 id="system-upgrade">System upgrade</h4>
<pre><code>$ sudo dnf upgrade --refresh
$ sudo dnf install dnf-plugin-system-upgrade
$ sudo dnf system-upgrade download --refresh --releasever=24
$ sudo dnf system-upgrade reboot
</code></pre><p>Note: (To remove packages: dnf clean packages).<br>Note that virtual box guest addition needs a reinstall after a kernel update .</p>
<h4 id="install-guest-additions-if-using-virtualbox-">Install Guest additions (if using Virtualbox)</h4>
<pre><code>dnf install -y kernel-devel-$(uname -r)
</code></pre><h4 id="disable-selinux">Disable SELinux</h4>
<pre><code>Sed -i ‘s/enforcing/disabled/g’ /etc/selinux/config
</code></pre><h4 id="install-epel-if-centos-">Install EPEL (if CentOS)</h4>
<pre><code>yum -y install epel-release
</code></pre><h4 id="install-google-chrome-repo">Install Google-chrome repo</h4>
<pre><code>sudo echo &quot;[google-chrome]
name=google-chrome
baseurl=http://dl.google.com/linux/chrome/rpm/stable/$basearch
enabled=1
gpgcheck=1
gpgkey=https://dl-ssl.google.com/linux/linux_signing_key.pub&quot; &gt;&gt; /etc/yum.repos.d/google-chrome.repo
</code></pre><h2 id="bash-colors">Bash colors</h2>
<p>Editor: <a href="https://www.kirsle.net/wizards/ps1.html">https://www.kirsle.net/wizards/ps1.html</a></p>
<h4 id="regular-user-bashrc-">Regular user (~/.bashrc)</h4>
<pre><code class="lang-bash">gitBranch () {
    git branch 2&gt; /dev/null | sed -e &#39;/^[^*]/d&#39; -e &#39;s/* \(.*\)/(\1)/&#39;
}
export PS1=&quot;\[$(tput bold)\]\[$(tput setaf 2)\]\u@\h \[$(tput setaf 7)\][\W] \[$(tput setaf 3)\]\$(gitBranch) \[$(tput setaf 2)\]\\$ \[$(tput sgr0)\]\[$(tput sgr0)\]&quot;
</code></pre>
<h4 id="root-bashrc-">Root (~/.bashrc)</h4>
<pre><code class="lang-bash">gitBranch () {
    git branch 2&gt; /dev/null | sed -e &#39;/^[^*]/d&#39; -e &#39;s/* \(.*\)/(\1)/&#39;
}
export PS1=&quot;\[$(tput bold)\]\[$(tput setaf 1)\]\u@\h \[$(tput setaf 7)\][\W] \[$(tput setaf 3)\]\$(gitBranch) \[$(tput setaf 1)\]\\$ \[$(tput sgr0)\]\[$(tput sgr0)\]&quot;
</code></pre>
<h4 id="other-prompts">Other prompts</h4>
<p><strong>White</strong>: <code>PS1=&quot;\[$(tput bold)\]\[$(tput setaf 7)\]\u@\h [\W] \\$ \[$(tput sgr0)\]&quot;</code><br><strong>Green</strong>: <code>PS1=&quot;\[$(tput bold)\]\[$(tput setaf 2)\]\u@\h \[$(tput setaf 7)\][\W]\[$(tput setaf 2)\] \\$ \[$(tput sgr0)\]&quot;</code><br><strong>Red</strong>: <code>PS1=&quot;\[$(tput bold)\]\[$(tput setaf 1)\]\u@\h \[$(tput setaf 7)\][\W]\[$(tput setaf 1)\] \\$ \[$(tput sgr0)\]&quot;</code><br><strong>Gold</strong>: <code>PS1=&quot;\[$(tput bold)\]\[$(tput setaf 3)\]\u@\h \[$(tput setaf 7)\][\W]\[$(tput setaf 3)\] \\$ \[$(tput sgr0)\]&quot;</code>  </p>
<h4 id="change-ps1-on-ssh-sessions">Change PS1 on SSH sessions</h4>
<p>Regular users</p>
<pre><code>if [ -n &quot;$SSH_CLIENT&quot; ]; then
   PS1=&quot;\[$(tput bold)\]\[$(tput setaf 3)\]\u@\h \[$(tput setaf 7)\][\W]\[$(tput setaf 3)\] \\$ \[$(tput sgr0)\]&quot;
else
   PS1=&quot;\[$(tput bold)\]\[$(tput setaf 2)\]\u@\h \[$(tput setaf 7)\][\W]\[$(tput setaf 2)\] \\$ \[$(tput sgr0)\]&quot;
fi
</code></pre><p>Root</p>
<pre><code>if [ -n &quot;$SSH_CLIENT&quot; ]; then
   PS1=&quot;\[$(tput bold)\]\[$(tput setaf 3)\]\u@\h \[$(tput setaf 7)\][\W]\[$(tput setaf 3)\] \\$ \[$(tput sgr0)\]&quot;
else
  PS1=&quot;\[$(tput bold)\]\[$(tput setaf 1)\]\u@\h \[$(tput setaf 7)\][\W]\[$(tput setaf 1)\] \\$ \[$(tput sgr0)\]&quot;
fi
</code></pre><h2 id="change-tmps-partition-size">Change tmps partition size</h2>
<pre><code>sudo mount -o remount,size=3G tmpfs /tmp/
</code></pre><p>To make it permanent, edit <code>/etc/fstab</code> to have a line like:</p>
<pre><code>tmpfs                   /dev/shm                tmpfs   size=3g        0 0
</code></pre><h2 id="lighttpd-setup">Lighttpd setup</h2>
<p>Note: Lighttpd might have a weird bug where it serves documents in a different directory that it creates, just rename /var/www/lighttpd to /var/www/htdocs, or adjust /etc/lighttpd/lighttpd.conf accordingly.</p>
<p>Fix forbidden commenting:</p>
<pre><code>## change uid to (default: don’t care)
#server.username = “www-data”
## change uid to (default: don’t care)
#server.groupname = “www-data”
</code></pre><h2 id="change-desktop">Change desktop</h2>
<pre><code>dnf install @kde-desktop
dnf install @mate-desktop
dnf install @xfce-desktop
dnf install @lxde-desktop
dnf install @cinnamon-desktop
</code></pre><h2 id="configure-vim">Configure Vim</h2>
<p>Edit <code>~/.vimrc</code> for current user, or <code>/etc/vim/vimrc</code> for all users, and include:</p>
<pre><code>set tabstop=4 softtabstop=0 noexpandtab shiftwidth=4
</code></pre><h2 id="skip-gnome-ssh-keypass-gui-for-password-">Skip gnome ssh keypass (GUI for password)</h2>
<p>Avoid gnome-ssh-keypass (graphical interface for user/pass)
Edit <code>~/.bashrc</code> to include:</p>
<pre><code>unset SSH_ASKPASS
</code></pre><h2 id="lxde">LXDE</h2>
<h4 id="run-on-init">Run on init</h4>
<p><code>~/.config/lxsession/LXDE/autostart</code></p>
<h4 id="lxde-change-background">LXDE - Change background</h4>
<p>Edit <code>/etc/lxdm/lxdm.conf</code> or change <code>/usr/share/backgrounds/default.png</code></p>
<h4 id="install-caja-file-manager">Install Caja file manager</h4>
<pre><code>$ dnf install -y caja
</code></pre><p>Edit <code>/usr/share/applications/caja.desktop</code> and comment the lines:</p>
<pre><code># OnlyShowIn=MATE
# NoDisplay=true
</code></pre><p>And add:</p>
<pre><code>Categories=System;FileTools;FileManager;Utility;
</code></pre><h2 id="proxy-config">Proxy config</h2>
<pre><code>[root@client ~]# vi /etc/profile
# add follows to the end (set proxy settings to the environment variables)
MY_PROXY_URL=&quot;http://prox.server.world:3128/&quot;
HTTP_PROXY=$MY_PROXY_URL
HTTPS_PROXY=$MY_PROXY_URL
FTP_PROXY=$MY_PROXY_URL
http_proxy=$MY_PROXY_URL
https_proxy=$MY_PROXY_URL
ftp_proxy=$MY_PROXY_URL
export HTTP_PROXY HTTPS_PROXY FTP_PROXY http_proxy https_proxy ftp_proxy
[root@client ~]# source /etc/profile
# it&#39;s OK all, but it&#39;s possible to set proxy settings for each application like follows
# for dnf
[root@client ~]# vi /etc/dnf/dnf.conf
# add follows to the end
proxy=http://prox.server.world:3128/
# for wget
[root@client ~]# vi /etc/wgetrc
# add follows to the end
http_proxy = http://prox.server.world:3128/
https_proxy = http://prox.server.world:3128/
ftp_proxy = http://prox.server.world:3128/
</code></pre><h2 id="virtual-box-compact-drive">Virtual box compact drive</h2>
<p>On guest: <code>$ dd if=/dev/zero of=zerofillfile bs=1M</code><br>On message “dd: writing &#39;zerofillfile&#39;: No space left on device”: <code>$ rm zerofillfile</code><br>Shutdown guest and run virtualbox command: <code>vboxmanage modifyhd &lt;path-to-disk&gt;.vdi --compact</code>  </p>
<h2 id="linux-common-bash-colors">Linux common bash colors</h2>
<pre><code>txtblk=&#39;\e[0;30m&#39; # Black - Regular
txtred=&#39;\e[0;31m&#39; # Red
txtgrn=&#39;\e[0;32m&#39; # Green
txtylw=&#39;\e[0;33m&#39; # Yellow
txtblu=&#39;\e[0;34m&#39; # Blue
txtpur=&#39;\e[0;35m&#39; # Purple
txtcyn=&#39;\e[0;36m&#39; # Cyan
txtwht=&#39;\e[0;37m&#39; # White
bldblk=&#39;\e[1;30m&#39; # Black - Bold
bldred=&#39;\e[1;31m&#39; # Red
bldgrn=&#39;\e[1;32m&#39; # Green
bldylw=&#39;\e[1;33m&#39; # Yellow
bldblu=&#39;\e[1;34m&#39; # Blue
bldpur=&#39;\e[1;35m&#39; # Purple
bldcyn=&#39;\e[1;36m&#39; # Cyan
bldwht=&#39;\e[1;37m&#39; # White
unkblk=&#39;\e[4;30m&#39; # Black - Underline
undred=&#39;\e[4;31m&#39; # Red
undgrn=&#39;\e[4;32m&#39; # Green
undylw=&#39;\e[4;33m&#39; # Yellow
undblu=&#39;\e[4;34m&#39; # Blue
undpur=&#39;\e[4;35m&#39; # Purple
undcyn=&#39;\e[4;36m&#39; # Cyan
undwht=&#39;\e[4;37m&#39; # White
bakblk=&#39;\e[40m&#39;   # Black - Background
bakred=&#39;\e[41m&#39;   # Red
bakgrn=&#39;\e[42m&#39;   # Green
bakylw=&#39;\e[43m&#39;   # Yellow
bakblu=&#39;\e[44m&#39;   # Blue
bakpur=&#39;\e[45m&#39;   # Purple
bakcyn=&#39;\e[46m&#39;   # Cyan
bakwht=&#39;\e[47m&#39;   # White
txtrst=&#39;\e[0m&#39;    # Text Reset
</code></pre><h2 id="tail-color-for-black-backgrounds-">Tail color (For black backgrounds)</h2>
<pre><code>#!/bin/bash

echo &quot;Using logPath $1&quot;

tail -f $1 | awk &#39;
    /DEBUG/ {print &quot;\033[0;37m&quot; $0 &quot;\033[39m&quot;}
    /WARN/ {print &quot;\033[33m&quot; $0 &quot;\033[39m&quot;}
    /INFO/ {print &quot;\033[1;37m&quot; $0 &quot;\033[39m&quot;}
    /ERROR/ {print &quot;\033[31m&quot; $0 &quot;\033[39m&quot;}
&#39;

exit 0;
</code></pre></div>
<div class="content-viewport col-md-9 " ng-show="$root.bookmark.chapter==4 && $root.bookmark.page==4"><h1 id="mysql-cluster-install">Mysql-cluster install</h1>
<hr>
<h2 id="download-packages">Download packages</h2>
<pre><code>MySQL-Cluster-server-gpl-7.4.11-1.el7.x86_64.rpm http://dev.mysql.com/downloads/file/?id=462784
MySQL-Cluster-client-gpl-7.4.11-1.el7.x86_64.rpm http://dev.mysql.com/downloads/file/?id=462783
</code></pre><h2 id="install-packages">Install packages</h2>
<pre><code>dnf install MySQL-Cluster-server-gpl-7.4.11-1.el7.x86_64.rpm
dnf install MySQL-Cluster-client-gpl-7.4.11-1.el7.x86_64.rpm
</code></pre><h2 id="create-directory-structure-example-">Create directory structure (example)</h2>
<pre><code>mkdir -p /opt/mycluster/
mkdir -p /opt/mycluster/data1
mkdir -p /opt/mycluster/data2
mkdir -p /opt/mycluster/mgmd_data
</code></pre><h2 id="edit-etc-my-cnf">Edit /etc/my.cnf</h2>
<pre><code>[mysql_cluster]
ndb-connectstring=127.0.0.1:1186
[mysqld]
# Enable MySQL Cluster
ndbcluster
# Tell this node where to find its management node
ndb-connectstring=127.0.0.1:1186
# Default storage engine
default-storage-engine = ndbcluster
</code></pre><h2 id="create-opt-mycluster-config-ini">Create /opt/mycluster/config.ini</h2>
<pre><code>[ndbd default]
NoOfReplicas=2
MaxNoOfAttributes=10000
MaxNoOfConcurrentOperations=150000
MaxNoOfOrderedIndexes=512
[ndb_mgmd]
NodeId=1
hostname=127.0.0.1
datadir=/opt/mycluster/mgmd_data
[ndbd]
hostname=127.0.0.1
DataDir=/opt/mycluster/data1
[ndbd]
hostname=127.0.0.1
DataDir=/opt/mycluster/data2
[mysqld]
hostname=127.0.0.1
[API]
[API]
[API]
[API]
[API]
</code></pre><h2 id="startup-first-time-">Startup (first time)</h2>
<pre><code>ndb_mgmd --config-file=/opt/mycluster/config.ini
ndbd --initial
ndbd --initial
systemctl start mysql
</code></pre><h2 id="startup-after-first-time-">Startup (after first time)</h2>
<pre><code>ndb_mgmd --config-file=/opt/mycluster/config.ini
ndbd
ndbd
systemctl start mysql
</code></pre><h2 id="status">Status</h2>
<pre><code>ndb_mgm -e show
</code></pre><h2 id="shutdown">Shutdown</h2>
<pre><code>ndb_mgm -e shutdown
</code></pre><h2 id="logs">Logs</h2>
<pre><code>/opt/mycluster/mgmd_data
</code></pre><h2 id="bash-script-edit-bashrc-">Bash script (edit ~.bashrc)</h2>
<pre><code>function cluster {

    if [ -z $1 ];
    then
        echo &quot;Use &#39;cluster [start | stop | status]&#39; to manage cluster&quot;;
    elif [ &quot;$1&quot; = &quot;start&quot; ];
        then
            echo &quot;Starting cluster...&quot;;
            ndb_mgmd --config-file=/opt/mycluster/config.ini;
            sleep 3;
            ndbd;
            sleep 3;
            ndbd;
    elif [ &quot;$1&quot; = &quot;stop&quot; ];
        then
            echo &quot;Stopping cluster...&quot;
            ndb_mgm -e shutdown;
    elif [ &quot;$1&quot; = &quot;status&quot; ];
        then
            ndb_mgm -e show;
    else
        echo &quot;Unknown parameter $1 (use &#39;start&#39;, &#39;stop&#39; or &#39;status)&quot;;
    fi
}
</code></pre><h2 id="virtualbox">VirtualBox</h2>
<p>To avoid having to change the IP on config.ini, the easiest thing to do is to redirect local port ‘1186’ to guest port ‘1186’ (Use the NAT connection for this).</p>
</div>
<div class="content-viewport col-md-9 " ng-show="$root.bookmark.chapter==4 && $root.bookmark.page==5"><h1 id="docker">Docker</h1>
<hr>
<h2 id="useful-commands">Useful commands</h2>
<table>
<thead>
<tr>
<th>Operation</th>
<th>Command</th>
</tr>
</thead>
<tbody>
<tr>
<td>Process list</td>
<td><code>docker ps</code></td>
</tr>
<tr>
<td>Process list (all)</td>
<td><code>docker ps -a</code></td>
</tr>
<tr>
<td>Run container in background</td>
<td><code>docker run -d &lt;tag&gt;</code></td>
</tr>
<tr>
<td>Run on container</td>
<td><code>docker exec &lt;tag&gt; &lt;cmd&gt;</code></td>
</tr>
<tr>
<td>Run on interactive tty</td>
<td><code>docker run -it &lt;tag&gt; &lt;cmd&gt;</code></td>
</tr>
<tr>
<td>Run &amp; dispose container</td>
<td><code>docker run -it --rm &lt;tag&gt; &lt;cmd&gt;</code></td>
</tr>
<tr>
<td>Stop all containers</td>
<td><code>docker stop $(docker ps -a -q)</code></td>
</tr>
<tr>
<td>Remove all containers</td>
<td><code>docker rm $(docker ps -a -q)</code></td>
</tr>
<tr>
<td>Remove dangling containers</td>
<td><code>docker rmi $(docker images -q -f dangling=true)</code></td>
</tr>
<tr>
<td>Network list</td>
<td><code>docker network</code></td>
</tr>
<tr>
<td>Network details (bridge)</td>
<td><code>docker network inspect bridge</code></td>
</tr>
<tr>
<td>Build image with tags</td>
<td><code>docker build -t &lt;tag&gt; .</code></td>
</tr>
</tbody>
</table>
<h2 id="sample-image-dockerfile">Sample image Dockerfile</h2>
<p>From <a href="https://github.com/apycazo/trivialis">trivialis</a> repo:</p>
<pre><code>### ==========================================================================
### Docker image for the trivialis provider to run:
### $ mvn clean package &amp;&amp; docker build -t trivialis/provider .
### $ docker run -d -p 8080:8080 --name trivialis-provider trivialis/provider
### ==========================================================================

# Use Centos as base layer
FROM centos
# Run system update
RUN yum -y upgrade
# Install openjdk
RUN yum -y install java-1.8.0-openjdk
# Open port
EXPOSE 8080
# Mount tmp volume on host
VOLUME /tmp
# Add jar file
ADD /target/trivialis-provider-1.0-SNAPSHOT.jar trivialis-provider.jar
# Update &#39;last modified&#39; field
RUN sh -c &#39;touch /trivialis-provider.jar&#39;
# On start command
ENTRYPOINT [&quot;java&quot;,&quot;-Djava.security.egd=file:/dev/./urandom&quot;,&quot;-jar&quot;,&quot;/trivialis-provider.jar&quot;]
</code></pre></div></div>
        <div class="footer"><p>Built with <a href="https://github.com/apycazo/marksite">Marksite</a></p></div>
    </div>
</body>
</html>