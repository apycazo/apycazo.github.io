# Maven tooltips
---
### Configuration processor

This dependency will scan the module looking for `@ConfigurationProperties`. Any value found will be included inside the jar in the
`META-INF/spring-configuration-metadata.json` file. Output looks like:

```json
{
  "hints": [],
  "groups": [
    {
      "sourceType": "com.github.apycazo.trivialis.client.config.TrivialisClientConfigurer",
      "name": "services.trivialis",
      "type": "com.github.apycazo.trivialis.client.config.TrivialisClientConfigurer"
    }
  ],
  "properties": [
    {
      "sourceType": "com.github.apycazo.trivialis.client.config.TrivialisClientConfigurer",
      "defaultValue": "http:\/\/127.0.0.1:8080",
      "name": "services.trivialis.provider",
      "type": "java.lang.String"
    },
    {
      "sourceType": "com.github.apycazo.trivialis.client.config.TrivialisClientConfigurer",
      "defaultValue": "http:\/\/127.0.0.1:8080",
      "name": "services.trivialis.provider",
      "type": "java.lang.String"
    }
  ]
}
```

```xml
<!-- Include property config -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-configuration-processor</artifactId>
</dependency>
```

### Resource filtering

```xml
<resources>
    <resource>
        <filtering>true</filtering>
        <directory>${basedir}/src/main/resources</directory>
        <includes>
            <include>*.properties</include>
            <include>*.yml</include>
        </includes>
    </resource>
    <resource>
        <filtering>false</filtering>
        <directory>${basedir}/src/main/resources</directory>
        <includes>
            <include>favicon.ico</include>
        </includes>
    </resource>
</resources>
```

### Repackaging script

```xml
<plugin>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-maven-plugin</artifactId>
    <version>${springboot.version}</version>
    <!-- Add service script -->
    <configuration>
        <executable>true</executable>
    </configuration>
    <!-- Create a fat jar -->
    <executions>
        <execution>
            <goals>
                <goal>repackage</goal>
            </goals>
        </execution>
    </executions>
</plugin>
```

### Include git info as properties

```xml
<plugin>
    <groupId>pl.project13.maven</groupId>
    <artifactId>git-commit-id-plugin</artifactId>
    <version>2.2.2</version>
</plugin>
```

Sample output on `/BOOT-INF/classes/git.properties`:

```
#Generated by Git-Commit-Id-Plugin
#Thu Mar 30 21:19:18 CEST 2017
git.build.user.email=user@test.com
git.build.host=fedora25
git.dirty=true
git.remote.origin.url=git@github.com\:apycazo/trivialis.git
git.closest.tag.name=
git.commit.id.describe-short=ebba938-dirty
git.commit.user.email=user@test.com
git.commit.time=2017-03-30T20\:39\:51+0200
git.commit.message.full=Added maven wrapper for builds.
git.build.version=1.0-SNAPSHOT
git.commit.message.short=Added maven wrapper for builds.
git.commit.id.abbrev=ebba938
git.branch=master
git.build.user.name=Andres Picazo
git.closest.tag.commit.count=
git.commit.id.describe=ebba938-dirty
git.commit.id=ebba938bc3aa52618ad890d91f0c4b9d52f44547
git.tags=
git.build.time=2017-03-30T21\:19\:18+0200
git.commit.user.name=Andres Picazo
```

### Include build info as properties

Add `build-info` goal:

```xml
<plugin>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-maven-plugin</artifactId>
    <executions>
        <execution>
            <goals>
                <goal>build-info</goal>
            </goals>
        </execution>
    </executions>
</plugin>
```

Sample output on `/META-INF/build-info.properties`:

```
#Properties
#Thu Mar 30 21:19:18 CEST 2017
build.time=2017-03-30T21\:19\:18+0200
build.artifact=trivialis-client
build.group=com.github.apycazo
build.name=trivialis-client
build.version=1.0-SNAPSHOT
```

### Add Spring Cloud dependencies

```xml
<properties>
    <!-- JAVA VERSION -->
    <java.version>1.8</java.version>
    <spring-cloud-netflix.version>1.2.0.RELEASE</spring-cloud-netflix.version>
</properties>

<dependencyManagement>
    <dependencies>
        <!-- Imports -->
        <dependency>
            <groupId>org.springframework.cloud</groupId>
            <artifactId>spring-cloud-netflix</artifactId>
            <version>${spring-cloud-netflix.version}</version>
            <type>pom</type>
            <scope>import</scope>
        </dependency>
    </dependencies>
</dependencyManagement>
```
